{{ define "main" }}

{{/* ---------- Cover Hero（裁一张 1920x1080，宽度锁定 100vw） ---------- */}}
{{- with .Resources.GetMatch "cover*" }}
  {{ $src := .Fill "1920x1080 center" }}
  <div class="w-screen max-w-none overflow-hidden">
    <img
      src="{{ $src.RelPermalink }}"
      alt="{{ $.Title }}"
      class="w-full h-[45vh] md:h-[60vh] object-cover"
      loading="lazy">
  </div>
{{- end }}

<article class="prose dark:prose-invert mx-auto my-8">

  <!-- 标题 + Icon -->
  <h1 class="flex items-center gap-2">
    {{ with .Params.icon }}
      {{ if hasPrefix . "images/" }}
        <img src="{{ . | relURL }}" class="w-8 h-8" alt="icon">
      {{ else }}<span class="text-3xl">{{ . }}</span>{{ end }}
    {{ end }}
    {{ .Title }}
  </h1>

  <p class="text-sm opacity-70 mb-8">
    {{ .Date.Format "02 January 2006" }} · {{ .ReadingTime }} min
  </p>

  {{ .Content }}

  {{ partial "article/author.html"    . | default "" }}
  {{ partial "article/pagination.html" . | default "" }}
  {{ partial "article/related.html"    . | default "" }}

</article>
{{ end }}
