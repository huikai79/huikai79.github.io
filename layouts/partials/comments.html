<div class="mt-16 max-w-prose">
  <div id="cusdis_thread"></div>
</div>

<!-- 引入 Cusdis 主脚本 -->
<script id="cusdis_js" src="https://cusdis.com/js/cusdis.es.js" async defer></script>

<script>
  function bootCusdis() {
    if (!window.Cusdis) return;
    window.Cusdis.init({
      el: '#cusdis_thread',
      host: 'https://cusdis.com',
      appId: '946b6e90-c221-4ddb-8234-b8392eac66e3',
      pageId: '{{ .File.UniqueID }}',
      pageTitle: '{{ .Title }}',
      pageUrl: '{{ .Permalink }}',
      theme: 'auto'
    });
  }

  // ① 脚本加载完成后触发
  document.getElementById('cusdis_js').addEventListener('load', bootCusdis);

  // ② 如果 onload 因浏览器缓存未触发，3 秒后兜底检查一次
  setTimeout(bootCusdis, 3000);
</script>
